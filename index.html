<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Success Squad Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --primary-color:#3d5af1;
  --primary-light:#e3e7fe;
  --secondary-color:#2c3e50;
  --white-color:#ffffff;
  --gray-color:#7b8ab8;
  --light-gray:#eef2f7;
  --error-color:#e74c3c;
}
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(45deg,#6576ff,#8a65ff);
  color:var(--secondary-color);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:1rem;
  margin:0;
}
.container{
  background:var(--white-color);
  padding:2.2rem;
  border-radius:14px;
  width:100%;
  max-width:720px;
  box-shadow:0 10px 30px rgba(0,0,0,0.12);
  text-align:center;
}
.hidden{display:none}
.option{
  display:block;
  padding:12px;
  border-radius:10px;
  border:2px solid var(--light-gray);
  margin-bottom:10px;
  text-align:left;
  cursor:pointer;
}
.option:hover{border-color:var(--primary-color);background:var(--primary-light)}
.option input{margin-right:10px}
.btn{
  background:var(--primary-color);
  color:#fff;
  border:none;
  padding:10px 18px;
  border-radius:8px;
  font-weight:700;
  cursor:pointer;
}
.btn[disabled]{opacity:0.5;cursor:not-allowed}
.btn-small{width:150px;margin:6px}
.btn-container{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin-top:12px}
#timer-display{
  background:var(--primary-light);
  color:var(--primary-color);
  padding:6px 12px;
  border-radius:20px;
  font-weight:700;
}
#question-counter{color:var(--gray-color);font-weight:600}
#alert-message{color:var(--error-color);font-weight:700;visibility:hidden;margin-top:10px}
</style>
</head>
<body>

<!-- USER INFO -->
<div id="user-info-container" class="container">
  <h2>Welcome to the Success Squad Quiz</h2>
  <p style="color:var(--gray-color)">You have <strong>40 minutes</strong>. Switching tabs or time expiry will auto-submit.</p>
  <form id="user-info-form" style="margin-top:1rem;text-align:left">
    <label>Full Name</label><input id="name" type="text" required style="width:100%;margin-bottom:1rem;">
    <label>Contact Number</label><input id="contact" type="tel" required style="width:100%;margin-bottom:1rem;">
    <label>College Name</label><input id="college" type="text" required style="width:100%;margin-bottom:1rem;">
    <label>Year of Study</label><input id="year" type="number" min="1" required style="width:100%;margin-bottom:1rem;">
    <label>Department</label><input id="dept" type="text" required style="width:100%;margin-bottom:1rem;">
    <button id="start-quiz-btn" class="btn" type="submit" style="float:right;">Start Quiz</button>
  </form>
</div>

<!-- QUIZ -->
<div id="quiz-container" class="container hidden">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
    <div id="question-counter">Question 0 / 0</div>
    <div id="timer-display">40:00</div>
  </div>

  <h2 id="question">Loading...</h2>
  <div id="options-container"></div>

  <div class="btn-container">
    <button id="prev-btn" class="btn btn-small" type="button">Previous</button>
    <button id="next-btn" class="btn btn-small" type="button">Next</button>
    <button id="submit-btn" class="btn btn-small hidden" type="button">Submit</button>
  </div>

  <div id="alert-message">Alert</div>
</div>

<!-- RESULTS -->
<div id="results-container" class="container hidden">
  <h2>Thank You for Completing the Quiz!</h2>
  <p id="user-greeting" style="font-weight:700;margin-top:1rem"></p>
  <p style="color:var(--gray-color);margin-top:0.5rem">
    Your responses have been successfully recorded. Please wait for the final results to be announced.
  </p>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey:"AIzaSyBVCqchYCJCqnf69PgeSthql-FcVPaAr-w",
  authDomain:"talent-hub-h3uq0.firebaseapp.com",
  databaseURL:"https://talent-hub-h3uq0-default-rtdb.firebaseio.com",
  projectId:"talent-hub-h3uq0",
  storageBucket:"talent-hub-h3uq0.firebasestorage.app",
  messagingSenderId:"364217907796",
  appId:"1:364217907796:web:0dd341d447067c69024bc1"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ---- Quiz Questions ----
const quizData = [
{ question:"What is the meaning of entrepreneurship?", options:["Working in a company","Starting and managing a new business with risk","Studying business in college","Buying products online"], correctAnswer:"Starting and managing a new business with risk" },
{ question:"What is bootstrapping?", options:["Raising funds","Using own money","Taking a loan","Selling shares"], correctAnswer:"Using own money" },
{ question:"What is revenue?", options:["Total earnings","Net profit","Total expenses","Borrowed money"], correctAnswer:"Total earnings" },
{ question:"What does MVP stand for?", options:["Most Valuable Product","Minimum Viable Product","Market Value Plan","Model Venture Plan"], correctAnswer:"Minimum Viable Product" },
{ question:"What is break-even point?", options:["No profit, no loss","First sale","Highest revenue","Lowest expense"], correctAnswer:"No profit, no loss" },
{ question:"What is cash flow?", options:["Money movement","Profit margin","Investment plan","Expense list"], correctAnswer:"Money movement" },
{ question:"Why do most startups fail?", options:["Lack of marketing","No real problem solved","Too many competitors","Weak branding"], correctAnswer:"No real problem solved" },
{ question:"What does ROI mean?", options:["Rate of Income","Return on Investment","Revenue of Industry","Ratio of Interest"], correctAnswer:"Return on Investment" },
{ question:"Mutual funds in India are regulated by:", options:["RBI","SEBI","Ministry of Finance","IRDAI"], correctAnswer:"SEBI" },
{ question:"Diversification helps in:", options:["Increasing risk","Reducing risk by spreading investments","Maximizing tax","Increasing inflation"], correctAnswer:"Reducing risk by spreading investments" },
{ question:"You have a great idea for an app, but you can’t code. What is the FIRST thing you do?", options:["Try to find a technical co-founder","Pay a company ₹5 Lakhs to build the app","Learn to code yourself","Use a no-code tool to build a simple version (MVP)"], correctAnswer:"Use a no-code tool to build a simple version (MVP)" },
{ question:"You have 100 users — 10 love your product, 90 just “like” it. What should you do?", options:["Please the 90 users","Focus on the 10 who love it","Ignore both groups","Add new features"], correctAnswer:"Focus on the 10 who love it" },
{ question:"Your competitor has ₹10 Crores funding; you only have ₹10 Lakhs. What’s your best move?", options:["Give up","Copy their move","Find one niche you can do 10x better","Send angry emails"], correctAnswer:"Find one niche you can do 10x better" },
{ question:"Your co-founders are fighting over the logo. What do you do?", options:["Pick yourself","Public poll","Private meeting to find cause","Fire designer"], correctAnswer:"Private meeting to find cause" },
{ question:"An investor offers ₹1 Crore for 50% of your startup. What do you do?", options:["Take it","Reject rudely","Politely decline and bootstrap","Counter ₹1Cr for 10%"], correctAnswer:"Politely decline and bootstrap" },
{ question:"Your food app is failing but users love chat feature. Relaunching as chat app is called?", options:["Acquisition","Pivot","Liquidation","Burn Rate"], correctAnswer:"Pivot" },
{ question:"You spend ₹500 to get a customer. They pay ₹100/month for 12 months. LTV:CAC?", options:["100:500","1200:500","500:100","1200:1200"], correctAnswer:"1200:500" },
{ question:"Your app is 90% ready. Co-founder says add more features. You say?", options:["Add now","Launch now; add later","Add 5 more","Add quickly"], correctAnswer:"Launch now; add later" },
{ question:"You have ₹1 Lakh for marketing. Best use?", options:["Hire influencer","Run TV ad","Do 100 small ad experiments","Print flyers"], correctAnswer:"Do 100 small ad experiments" },
{ question:"Your team has a new idea. First step?", options:["Make NDA","Start coding","Research who already failed","Brainstorm 3 days"], correctAnswer:"Research who already failed" },
{ question:"Which ratio measures efficiency in using assets?", options:["Debt-to-Equity","Return on Assets (ROA)","P/E Ratio","Current Ratio"], correctAnswer:"Return on Assets (ROA)" },
{ question:"A “unicorn” startup is valued at:", options:["$100M","$500M","$1B","$10B"], correctAnswer:"$1B" },
{ question:"Lenskart reported net profit of:", options:["₹150 crore","₹297 crore","₹520 crore","₹80 crore"], correctAnswer:"₹297 crore" },
{ question:"Which city topped startup funding (Jul–Sep 2025)?", options:["Bengaluru","Mumbai","Delhi","Hyderabad"], correctAnswer:"Bengaluru" },
{ question:"The Fund of Funds for Startups is managed by:", options:["SIDBI","RBI","SEBI","NITI Aayog"], correctAnswer:"SIDBI" }
];

// ---- Variables ----
let current=0,userAnswers={},userInfo={},quizSubmitted=false,timerInterval;
const TIME_LIMIT_SECONDS=40*60;
const quizC=document.getElementById('quiz-container');
const userInfoC=document.getElementById('user-info-container');
const resC=document.getElementById('results-container');
const qEl=document.getElementById('question');
const optC=document.getElementById('options-container');
const nextBtn=document.getElementById('next-btn');
const prevBtn=document.getElementById('prev-btn');
const submitBtn=document.getElementById('submit-btn');
const counter=document.getElementById('question-counter');
const timerDisplay=document.getElementById('timer-display');

// ---- Functions ----
function startTimer(){
 let t=TIME_LIMIT_SECONDS;
 const update=()=>{
  const m=Math.floor(t/60),s=t%60;
  timerDisplay.textContent=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  if(t<=0){saveAns();submitQuiz("time_expired");}
  t--;
 };
 update();
 timerInterval=setInterval(update,1000);
}

function startQuiz(){
 userInfoC.classList.add('hidden');
 quizC.classList.remove('hidden');
 loadQ();
 startTimer();
}

function loadQ(){
 const q=quizData[current];
 qEl.innerText=q.question;
 optC.innerHTML='';
 counter.innerText=`Question ${current+1} / ${quizData.length}`;
 q.options.forEach(opt=>{
   const id=`q${current}-${opt.replace(/\s+/g,'-')}`;
   optC.innerHTML+=`<label class="option"><input type="radio" id="${id}" name="q${current}" value="${opt}" ${userAnswers[current]===opt?'checked':''}> ${opt}</label>`;
 });
 prevBtn.disabled=current===0;
 nextBtn.classList.toggle('hidden',current===quizData.length-1);
 submitBtn.classList.toggle('hidden',current!==quizData.length-1);
}

function saveAns(){
 const sel=document.querySelector(`input[name="q${current}"]:checked`);
 userAnswers[current]=sel?sel.value:null;
}

function submitQuiz(reason="user_submitted"){
 if(quizSubmitted)return;
 quizSubmitted=true;
 clearInterval(timerInterval);
 saveAns();

 let score=0;
 quizData.forEach((q,i)=>{if(userAnswers[i]===q.correctAnswer)score++;});

 db.ref('quizSubmissions').push({
  userInfo,score,total:quizData.length,answers:userAnswers,
  submittedAt:new Date().toISOString(),reason
});

 quizC.classList.add('hidden');
 resC.classList.remove('hidden');
 document.getElementById('user-greeting').innerText=`Thank you, ${userInfo.name || 'Participant'}!`;

 if(reason==="tab_switched"||reason==="time_expired"){
   alert(`Quiz auto-submitted (${reason.replace('_',' ')})`);
 }
}

// ---- Event Listeners ----
document.getElementById('user-info-form').addEventListener('submit',e=>{
 e.preventDefault();
 userInfo={
   name:document.getElementById('name').value,
   contact:document.getElementById('contact').value,
   college:document.getElementById('college').value,
   year:document.getElementById('year').value,
   department:document.getElementById('dept').value
 };
 startQuiz();
});

nextBtn.addEventListener('click',()=>{saveAns();if(current<quizData.length-1){current++;loadQ();}});
prevBtn.addEventListener('click',()=>{saveAns();if(current>0){current--;loadQ();}});
submitBtn.addEventListener('click',()=>{saveAns();submitQuiz("user_submitted");});
document.addEventListener('visibilitychange',()=>{if(document.hidden){saveAns();submitQuiz("tab_switched");}});
</script>
</body>
</html>
